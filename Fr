#include <iostream>
#include <vector>
#include <fstream>
#include <algorithm>
using namespace std;

struct Element {
    int row;
    int col;
    double value;
};

// Функция для сравнения двух элементов по строке и столбцу
bool compareElements(const Element &a, const Element &b) {
    if (a.row == b.col) {
        return a.col < b.col;
    }
    return a.row < b.row;
}

int main() {
    ifstream fin("/Users/имя_пользователя/Desktop/1138_bus.mtx");
    ofstream fout("/Users/имя_пользователя/Desktop/AA.txt");

    int n, m, nnz;
    fin >> n >> m >> nnz;

    vector<Element> elements;

    // Чтение ненулевых элементов
    for (int i = 0; i < nnz; i++) {
        int row, col;
        double value;
        fin >> row >> col >> value;
        elements.push_back({row, col, value});
    }

    // Сортировка элементов по строкам и столбцам
    sort(elements.begin(), elements.end(), compareElements);

    // Запись отсортированных элементов в файл
    fout << n << " " << m << " " << nnz << endl;
    for (const auto &element : elements) {
        fout << element.row << " " << element.col << " " << element.value << endl;
    }

    fin.close();
    fout.close();

    return 0;
}
